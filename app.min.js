function range(e,a,r){if("undefined"==typeof a&&(a=e,e=0),"undefined"==typeof r&&(r=1),r>0&&e>=a||0>r&&a>=e)return[];for(var n=[],o=e;r>0?a>o:o>a;o+=r)n.push(o);return n}!function(){"use strict";angular.module("gasolinaApp",["ngRoute","ngStorage"])}(),function(){"use strict";angular.module("gasolinaApp").config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/acerca/acerca.html"}).when("/registrar/",{templateUrl:"app/declaraciones/registrar.html",controller:"RegistrarController",controllerAs:"regVm"}).when("/consultar/",{templateUrl:"app/declaraciones/consultar.html",controller:"ConsultarController",controllerAs:"consultarVm"}).when("/acerca/",{templateUrl:"app/acerca/acerca.html"})}])}(),function(){"use strict";function e(e){function a(){console.log("getAll");var a=e.get(n);return a}function r(a){console.log("post");var r=e.post(n,{declaracion:a});return r}this.all=a,this.save=r;var n="https://nameless-falls-81232.herokuapp.com/declaraciones"}angular.module("gasolinaApp").service("DeclaracionesService",e),e.$inject=["$http"]}(),function(){"use strict";function e(){function e(){return a}this.getMeses=e;var a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}angular.module("gasolinaApp").service("MesesService",e),e.$inject=[]}(),function(){"use strict";function e(){function e(e,a){return e.nombre.localeCompare(a.nombre)}function a(){return n.sort(e)}function r(e){var a=$.grep(n,function(a){return a.nombre==e});return 0===a.length?[]:a[0].municipios}var n=[{nombre:"Atlántico",municipios:["Barranquilla","Sabanalarga"].sort()},{nombre:"Magdalena",municipios:["Santa Marta","Santa Ana"].sort()},{nombre:"Cesar",municipios:["Valledupar","Aguachica"].sort()},{nombre:"Bolívar",municipios:["Cartagena","Talaigua"].sort()},{nombre:"Sucre",municipios:["Sincelejo","Sincé"].sort()},{nombre:"Córdoba",municipios:["Montería","Cereté"].sort()},{nombre:"San Andrés, Providencia y Santa Catalina",municipios:["San Andrés","Providencia"].sort()},{nombre:"Santander",municipios:["Bucaramanga","Barrancabermeja"].sort()},{nombre:"La Guajira",municipios:["Riohacha","Maicao"].sort()}];this.getDepartamentos=a,this.getMunicipios=r}angular.module("gasolinaApp").service("DepartamentosService",e),e.$inject=[]}(),function(){"use strict";function e(){function e(){return a.sort()}this.getAnios=e;var a=range(2009,2017,1)}angular.module("gasolinaApp").service("AniosService",e),e.$inject=[]}(),function(){"use strict";function e(e){console.log("Entró a IndexController");var a=this;a.verRegistrar=!1,a.verConsultar=!1,a.verAcerca=!0,a.activeRegistrar=function(){a.verRegistrar=!0,a.verAcerca=!1,a.verConsultar=!1},a.activeConsultar=function(){a.verConsultar=!0,a.verRegistrar=!1,a.verAcerca=!1},a.activeAcerca=function(){a.verAcerca=!0,a.verRegistrar=!1,a.verConsultar=!1},"/registrar/"==e.path()?a.activeRegistrar():"/consultar/"==e.path()?a.activeConsultar():"/acerca/"==e.path()&&a.activeAcerca(),a.mostrar=function(e){console.log(e)}}angular.module("gasolinaApp").controller("IndexController",e),e.$inject=["$location"]}(),function(){"use strict";function e(e,a,r,n){function o(){s.declaracion={},s.declaracion.municipio="",s.municipios=[];var e=function(e){this.clase=e,this.galones_gravado=0,this.precio_referencia=0,this.porcentaje_alcohol=0,this.base_gravable=0,this.sobretasa=0};s.declaracion.gasolinas_attributes=[new e("Gasolina corriente básica"),new e("Gasolina corriente oxigenada"),new e("Gasolina extra básica"),new e("Gasolina extra oxigenada"),new e("Gasolina importada"),new e("Gasolina NAL. ZON. ESP. FRONT")]}function t(e){e.base_gravable=e.galones_gravado*(1-e.porcentaje_alcohol/100)*e.precio_referencia,e.sobretasa=.06*e.base_gravable}function i(){s.declaracion.municipio="",s.municipios=r.getMunicipios(s.declaracion.departamento)}function c(){s.declaracion.correccion_fecha=$("#datepicker").val(),console.log(s.declaracion),e.save(s.declaracion).then(function(e){console.log(e),o(),s.respuestaRegistro="Registró correctamente"})["catch"](function(e){console.log(e),s.respuestaRegistro=e.statusText})["finally"](function(){$("#modalRegistro").modal()})}console.log("Entró a RegistrarController");var s=this;s.anios=n.getAnios(),s.calcular=t,s.cargarMunicipios=i,s.departamentos=r.getDepartamentos(),s.guardar=c,s.meses=a.getMeses(),o()}angular.module("gasolinaApp").controller("RegistrarController",e),e.$inject=["DeclaracionesService","MesesService","DepartamentosService","AniosService"]}(),function(){"use strict";function e(e){function a(e){n.declaracionSeleccionada=e,n.isMostrado=!0,console.log("Declaración seleccionada:",e)}function r(){e.all().then(function(e){n.declaraciones=e.data})["catch"](function(e){console.log(e),alert(e.statusText)})}console.log("Entró a ConsultarController");var n=this;n.declaracionSeleccionada={},n.declaraciones=[],n.isMostrado=!1,n.mostrarDeclaracion=a,r()}angular.module("gasolinaApp").controller("ConsultarController",e),e.$inject=["DeclaracionesService"]}(),$(document).on("focus","#datepicker",function(){$("#datepicker").datepicker({dateFormat:"yy-mm-dd"})});